<!--index.wxml-->
<view id="body">
  <view style="height: 10%;display: flex; flex-direction: row;box-shadow: 0px 2rpx darkgray;">
    <text style="margin-top: auto;font-size: large;flex: auto;">当前：{{campus}}-{{restaurant}}</text>
    <button style="flex: auto; width: 90rpx;background-color: darkblue;color: white;max-width: max-content;max-height: max-content;margin-right: 5rpx;" bindtap="changeRestaurant">切换</button>
  </view>
  <view style="margin: auto;max-width: 70%;margin-top: 50%;">
    <view style="text-align: center;font-size: 50rpx;">{{now}}{{choice}}</view>
    <swiper wx:if="{{!(isClick-1)}}" style="text-align: center;font-size: 50rpx;margin-top: 12%;max-height:30px;overflow: hidden;" vertical="true" autoplay="true" interval="17" duration="87" circular="true">
      <swiper-item style="height: 100px;" wx:for="{{a}}">{{item.name}}</swiper-item>
    </swiper>
    <!--  -->
    <view wx:elif="{{isClick==2}}" style="text-align: center;font-size: 50rpx;margin-top: 12%;">{{a[disk].name}}</view>
    <view style="display: flex;margin-top: 15%;">
      <button wx:if="{{isClick==0||isClick==2}}" bindtap="rank" style="flex: auto;max-width: max-content;background-color: lightsalmon;">开始</button>
        <button wx:if="{{isClick==1}}"  bindtap="rank" style="flex: auto;max-width: max-content;background-color: lightgreen;">{{msg}}</button>
        <!-- <button wx:if="{{isClick==2}}" style="flex: auto;max-width: max-content;background-color: lightsalmon;">
          就它了</button> -->
    </view>
  </view>
  <page-container 
    show="{{showDisk||showChangeCampus}}"
    position="center"
    duration="{{duration}}"
    custom-style="{{customstyle}}"
    bind:afterleave="resetpage"
  >
    <view wx:if="{{showDisk}}">
    <view  style="margin: auto;margin-top: 20%;max-width: 70%;border-radius: 50rpx;border: 20rpx solid lightcoral;">
      <image></image>
      <view style="border-top: 10rpx solid lightgray;height: 300rpx;">
        <view style="font-size: 60rpx;text-align: center;">{{a[disk].name+" "+a[disk].price}}</view>
        <view style="font-size: 60rpx;text-align: center;">位置：{{a[disk].possition}}</view>
        <view style="font-size: xx-large;">标签：<text wx:for="{{a[disk].lable}}" style="display: inline;margin-right: 40rpx;font-size: 60rpx;">{{item}}</text></view>
      </view>
    </view>
    <view style="display: flex;margin: auto;margin-top: 10%;max-width: 75%;">
      <button style="flex: auto;max-width: max-content;background-color: lightsalmon;">就它了</button>
      <button bindtap="rank" style="flex: auto;max-width: max-content;background-color: lightgreen;">换一个</button>
    </view>
    </view>
    <view wx:if="{{showChangeCampus}}">
      <view style="background-color: blanchedalmond;">{{campus}}-{{restaurant}}-{{floor}}</view>
    </view>
  </page-container>
</view>
